<div
  class="flex min-w-0 flex-auto flex-col items-center sm:flex-row sm:justify-center md:items-start md:justify-start">

  <!-- Left: Form -->
  <div
    class="w-full px-4 py-8 sm:bg-card sm:w-auto sm:rounded-2xl sm:p-12 sm:shadow md:flex md:h-full md:w-1/2 md:items-center md:justify-end md:rounded-none md:p-16 md:shadow-none">
    <div class="mx-auto w-full max-w-80 sm:mx-0 sm:w-80">

      <!-- Logo -->
       <div class="w-12">
                <img src="images/logo/Logo.png" />
            </div>
      <div class="flex items-center gap-3">
        <div class="leading-tight">
          <div class="text-lg font-semibold">Portalito MX</div>
          <div class="text-xs text-secondary">Portal de Facturación</div>
          <div class="text-xs text-secondary">CFDI 4.0 · Notas de crédito · Clientes</div>
        </div>
      </div>

      <!-- Title -->
      <div class="mt-8 text-4xl font-extrabold leading-tight tracking-tight">
        Iniciar sesión
      </div>

      <div class="mt-0.5 flex items-baseline font-medium">
        <div>¿Aún no tienes cuenta?</div>
        <a class="ml-1 text-primary-500 hover:underline" [routerLink]="['/sign-up']">
          Crear cuenta
        </a>
      </div>

      <!-- Alert -->
      @if (showAlert) {
      <fuse-alert
        class="mt-8"
        [appearance]="'outline'"
        [showIcon]="false"
        [type]="alert.type"
        [@shake]="alert.type === 'error'">
        {{ alert.message }}
      </fuse-alert>
      }

      <!-- Sign in form -->
      <form class="mt-8" [formGroup]="signInForm" #signInNgForm="ngForm">

        <!-- User field -->
        <mat-form-field class="w-full">
          <mat-label>Usuario / RFC / Correo</mat-label>
          <input
            id="email"
            matInput
            [formControlName]="'email'"
            autocomplete="username" />
          <mat-hint class="text-xs text-secondary">
            Ingresa tu usuario o el correo registrado en tu cuenta.
          </mat-hint>
          @if (signInForm.get('email')?.hasError('required')) {
          <mat-error>Dato requerido</mat-error>
          }
        </mat-form-field>

        <!-- Password field -->
        <mat-form-field class="w-full">
          <mat-label>Contraseña</mat-label>
          <input
            id="password"
            matInput
            type="password"
            [formControlName]="'password'"
            #passwordField
            autocomplete="current-password" />

          <button
            mat-icon-button
            type="button"
            matSuffix
            (click)="passwordField.type === 'password'
              ? (passwordField.type = 'text')
              : (passwordField.type = 'password')">
            @if (passwordField.type === 'password') {
            <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:eye'"></mat-icon>
            }
            @if (passwordField.type === 'text') {
            <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:eye-slash'"></mat-icon>
            }
          </button>

          @if (signInForm.get('password')?.hasError('required')) {
          <mat-error>Dato requerido</mat-error>
          }
        </mat-form-field>

        <!-- Actions -->
        <div class="mt-2 inline-flex w-full items-center justify-between">
          <mat-checkbox class="-ml-2" [color]="'primary'" [formControlName]="'rememberMe'">
            Mantener sesión
          </mat-checkbox>

          <a
            class="text-md font-medium text-primary-500 hover:underline"
            [routerLink]="['/forgot-password']">
            Recuperar acceso
          </a>
        </div>

        <!-- Submit button -->
        <button
          class="fuse-mat-button-large mt-6 w-full"
          mat-flat-button
          [color]="'primary'"
          [disabled]="signInForm.disabled"
          (click)="signIn()">
          @if (!signInForm.disabled) {
          <span>Entrar al portal</span>
          }
          @if (signInForm.disabled) {
          <mat-progress-spinner [diameter]="24" [mode]="'indeterminate'"></mat-progress-spinner>
          }
        </button>

        <!-- Small trust note -->
        <div class="mt-4 text-center text-xs text-secondary">
          Acceso seguro · Tus datos fiscales se mantienen protegidos.
        </div>

      </form>
    </div>
  </div>

  <!-- Right: Marketing -->
  <div
    class="relative hidden h-full w-1/2 flex-auto items-center justify-center overflow-hidden bg-gray-900 p-16 dark:border-l md:flex lg:px-28">

    <!-- Background decor -->
    <svg class="absolute inset-0 pointer-events-none" viewBox="0 0 960 540" width="100%" height="100%"
      preserveAspectRatio="xMidYMax slice" xmlns="http://www.w3.org/2000/svg">
      <g class="text-gray-700 opacity-25" fill="none" stroke="currentColor" stroke-width="100">
        <circle r="234" cx="196" cy="23"></circle>
        <circle r="234" cx="790" cy="491"></circle>
      </g>
    </svg>

    <svg class="absolute -top-16 -right-16 text-gray-700" viewBox="0 0 220 192" width="220" height="192" fill="none">
      <defs>
        <pattern id="dots-login" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
          <rect x="0" y="0" width="4" height="4" fill="currentColor"></rect>
        </pattern>
      </defs>
      <rect width="220" height="192" fill="url(#dots-login)"></rect>
    </svg>

    <div class="relative z-10 w-full max-w-2xl">
      <div class="text-7xl font-bold leading-none text-gray-100">
        <div>Facturación</div>
        <div>clara y rápida</div>
      </div>

      <div class="mt-6 text-lg leading-6 tracking-tight text-gray-400">
        Emite CFDI 4.0, administra clientes y productos, genera notas de crédito y descarga XML/PDF
        en segundos. Mantén control por sucursal y folios para timbrado.
      </div>

      <div class="mt-8 grid grid-cols-1 gap-3 text-sm text-gray-300">
        <div class="flex items-start gap-2">
          <mat-icon class="icon-size-5 text-gray-400" [svgIcon]="'heroicons_solid:check-circle'"></mat-icon>
          <div>Emisión y cancelación de CFDI con historial</div>
        </div>
        <div class="flex items-start gap-2">
          <mat-icon class="icon-size-5 text-gray-400" [svgIcon]="'heroicons_solid:check-circle'"></mat-icon>
          <div>Notas de crédito totales y parciales</div>
        </div>
        <div class="flex items-start gap-2">
          <mat-icon class="icon-size-5 text-gray-400" [svgIcon]="'heroicons_solid:check-circle'"></mat-icon>
          <div>Multi-emisor, sucursales, series y folios</div>
        </div>
        <div class="flex items-start gap-2">
          <mat-icon class="icon-size-5 text-gray-400" [svgIcon]="'heroicons_solid:check-circle'"></mat-icon>
          <div>Sin anualidad, sin vencimiento en timbres</div>
        </div>
      </div>

      <div class="mt-10 text-xs text-gray-500">
        CFDI 4.0 · Complementos según necesidad · Integración con PAC
      </div>
    </div>
  </div>
</div>